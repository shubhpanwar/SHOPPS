<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#4CAF50">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="ShopHub - Your one-stop destination for all your shopping needs. We offer quality products at affordable prices.">
    <meta name="keywords" content="ecommerce, online shopping, electronics, fashion, home decor">
    <meta name="author" content="ShopHub">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://shophub.netlify.app/">
    <meta property="og:title" content="ShopHub - Premium E-Commerce Experience">
    <meta property="og:description" content="Discover amazing products at incredible prices. Free shipping on orders over ₹100.">
    <meta property="og:image" content="https://shophub.netlify.app/images/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://shophub.netlify.app/">
    <meta property="twitter:title" content="ShopHub - Premium E-Commerce Experience">
    <meta property="twitter:description" content="Discover amazing products at incredible prices. Free shipping on orders over ₹100.">
    <meta property="twitter:image" content="https://shophub.netlify.app/images/og-image.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://shophub.netlify.app/">
    
    <title>ShopHub - Premium E-Commerce Experience</title>
    
    <!-- PWA Support -->
    <link rel="manifest" href="../manifest.json">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../images/favicon.png">
    <link rel="apple-touch-icon" href="../images/apple-touch-icon.png">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="../CSS/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Mobile bottom navigation - visible only on small screens -->
    <div class="mobile-nav show-on-mobile">
        <a href="../HTML/index.html" class="mobile-nav-item">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="../HTML/categories.html" class="mobile-nav-item">
            <i class="fas fa-th-large"></i>
            <span>Categories</span>
        </a>
        <a href="../HTML/products.html" class="mobile-nav-item">
            <i class="fas fa-store"></i>
            <span>Shop</span>
        </a>
        <a href="../HTML/cart.html" class="mobile-nav-item">
            <i class="fas fa-shopping-cart"></i>
            <span>Cart</span>
        </a>
        <a href="../HTML/account.html" class="mobile-nav-item">
            <i class="fas fa-user"></i>
            <span>Account</span>
        </a>
    </div>

    <!-- Header section -->
    <header>
        <div class="container">
            <div class="navbar">
                <div class="logo">
                    <h1>ShopHub</h1>
                </div>
                <div class="search-bar">
                    <input type="text" placeholder="Search for products, brands and more...">
                    <button><i class="fas fa-search"></i></button>
                </div>
                <nav>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="categories.html">Categories</a></li>
                        <li><a href="#" class="login-btn">Login</a></li>
                        <li class="cart-icon"><a href="cart.html"><i class="fas fa-shopping-cart"></i> <span class="cart-count">0</span></a></li>
                    </ul>
                </nav>
                <div class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>Latest Fashion Trends</h1>
                <p>Discover our newest collections with exclusive discounts</p>
                <a href="products.html" class="btn">Shop Now</a>
            </div>
        </div>
    </section>

    <!-- Featured categories -->
    <section class="categories">
        <div class="container">
            <h2 class="section-title">Popular Categories</h2>
            <div class="category-container">
                <div class="category-card">
                    <img src="https://images.unsplash.com/photo-1542291026-7eec264c27ff" alt="Shoes">
                    <h3>Shoes</h3>
                    <a href="categories.html?cat=shoes" class="btn-small">View All</a>
                </div>
                <div class="category-card">
                    <img src="https://images.unsplash.com/photo-1588117305388-c2631a279f82" alt="Electronics">
                    <h3>Electronics</h3>
                    <a href="categories.html?cat=electronics" class="btn-small">View All</a>
                </div>
                <div class="category-card">
                    <img src="https://images.unsplash.com/photo-1551232864-3f0890e580d9" alt="Clothing">
                    <h3>Clothing</h3>
                    <a href="categories.html?cat=clothing" class="btn-small">View All</a>
                </div>
                <div class="category-card">
                    <img src="https://images.unsplash.com/photo-1515955656352-a1fa3ffcd111" alt="Accessories">
                    <h3>Accessories</h3>
                    <a href="categories.html?cat=accessories" class="btn-small">View All</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured products -->
    <section class="featured-products">
        <div class="container">
            <h2 class="section-title">Featured Products</h2>
            <div class="product-container" id="featured-products">
                <!-- Products will be loaded from JavaScript -->
            </div>
        </div>
    </section>

    <!-- Special offers -->
    <section class="special-offers">
        <div class="container">
            <div class="offer-banner">
                <div class="offer-content">
                    <h2>SPECIAL OFFER</h2>
                    <h3>Get 20% OFF on your first purchase</h3>
                    <p>Use promo code: <span>FIRST20</span></p>
                    <a href="products.html" class="btn">Shop Now</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Trending products -->
    <section class="trending-products">
        <div class="container">
            <h2 class="section-title">Trending Now</h2>
            <div class="product-container" id="trending-products">
                <!-- Products will be loaded from JavaScript -->
            </div>
        </div>
    </section>

    <!-- Testimonials -->
    <section class="testimonials">
        <div class="container">
            <h2 class="section-title">What Our Customers Say</h2>
            <div class="testimonial-container">
                <div class="testimonial">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p>"The quality of the products is amazing! Quick delivery and excellent customer service. Will definitely shop again."</p>
                    <div class="customer">
                        <h4>Samantha K.</h4>
                    </div>
                </div>
                <div class="testimonial">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <p>"Best online shopping experience. The website is user-friendly and the product range is extensive. Highly recommended!"</p>
                    <div class="customer">
                        <h4>Michael T.</h4>
                    </div>
                </div>
                <div class="testimonial">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p>"Found exactly what I was looking for at a great price. The shipping was fast and the packaging was secure. Will be a returning customer!"</p>
                    <div class="customer">
                        <h4>Jennifer L.</h4>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Newsletter -->
    <section class="newsletter">
        <div class="container">
            <div class="newsletter-content">
                <h2>Subscribe to Our Newsletter</h2>
                <p>Get exclusive offers, new arrivals, and insider discounts</p>
                <form class="newsletter-form">
                    <input type="email" placeholder="Enter your email" required>
                    <button type="submit" class="btn">Subscribe</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>ShopHub</h3>
                    <p>Your one-stop destination for all your shopping needs. We offer quality products at affordable prices.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-pinterest"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="categories.html">Categories</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Customer Service</h3>
                    <ul>
                        <li><a href="#">My Account</a></li>
                        <li><a href="cart.html">View Cart</a></li>
                        <li><a href="#">Track My Order</a></li>
                        <li><a href="#">Help Center</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Info</h3>
                    <ul class="contact-info">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Main Street, City, Country</li>
                        <li><i class="fas fa-phone"></i> +1 234 567 8900</li>
                        <li><i class="fas fa-envelope"></i> info@shophub.com</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="container">
                <p>&copy; 2023 ShopHub. All Rights Reserved.</p>
                <div class="payment-methods">
                    <i class="fab fa-cc-visa"></i>
                    <i class="fab fa-cc-mastercard"></i>
                    <i class="fab fa-cc-amex"></i>
                    <i class="fab fa-cc-paypal"></i>
                </div>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Login</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="btn">Login</button>
            </form>
            <p>Don't have an account? <a href="#" id="show-register">Register</a></p>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="register-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Create Account</h2>
            <form id="register-form">
                <div class="form-group">
                    <label for="fullname">Full Name</label>
                    <input type="text" id="fullname" required>
                </div>
                <div class="form-group">
                    <label for="register-email">Email</label>
                    <input type="email" id="register-email" required>
                </div>
                <div class="form-group">
                    <label for="register-password">Password</label>
                    <input type="password" id="register-password" required>
                </div>
                <div class="form-group">
                    <label for="confirm-password">Confirm Password</label>
                    <input type="password" id="confirm-password" required>
                </div>
                <button type="submit" class="btn">Register</button>
            </form>
            <p>Already have an account? <a href="#" id="show-login">Login</a></p>
        </div>
    </div>

    <script src="../JAVASCRIPT/products.js"></script>
    <script src="../JAVASCRIPT/app.js"></script>
    <script src="../JAVASCRIPT/mobile.js"></script>
    <script src="../JAVASCRIPT/imageLoader.js"></script>
    <script src="../JAVASCRIPT/notifications.js"></script>

    <!-- Structured Data for Organization -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "ShopHub",
        "url": "https://shophub.netlify.app",
        "logo": "https://shophub.netlify.app/images/logo.png",
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+1-234-567-8900",
            "contactType": "customer service",
            "availableLanguage": ["English"]
        },
        "sameAs": [
            "https://facebook.com/shophub",
            "https://twitter.com/shophub",
            "https://instagram.com/shophub"
        ]
    }
    </script>

    <!-- Structured Data for WebSite -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "url": "https://shophub.netlify.app",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://shophub.netlify.app/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>

    <!-- Service Worker Registration -->
    <script>
      // Register the service worker
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/serviceworker.js')
            .then(registration => {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            })
            .catch(err => {
              console.log('ServiceWorker registration failed: ', err);
            });
        });
      }
    </script>

    <!-- Add mobile nav toggle script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize featured products carousel
            initFeaturedProducts();
            
            // Initialize trending products carousel
            initTrendingProducts();
            
            // Initialize category filters
            initCategoryFilters();
            
            // Initialize newsletter form
            initNewsletter();
            
            // Initialize mobile navigation
            initMobileNav();
            
            // Initialize image lazy loading if available
            if (typeof initImageLazyLoading === 'function') {
                initImageLazyLoading();
            }
        });
        
        // Initialize featured products carousel
        function initFeaturedProducts() {
            const featuredProductsContainer = document.querySelector('#featured-products .products-slider');
            if (!featuredProductsContainer) return;
            
            try {
                // Get featured products (max 8)
                let featuredProducts = [];
                if (typeof getFeaturedProducts === 'function') {
                    featuredProducts = getFeaturedProducts().slice(0, 8);
                } else {
                    // Fallback if function not available
                    console.warn('getFeaturedProducts function not found');
                }
                
                // Clear container
                featuredProductsContainer.innerHTML = '';
                
                // Render products
                if (featuredProducts.length === 0) {
                    featuredProductsContainer.innerHTML = '<p class="no-products">No featured products available.</p>';
                    return;
                }
                
                // Use optimized rendering if available
                if (typeof renderProductWithImageHandling === 'function') {
                    featuredProducts.forEach(product => {
                        renderProductWithImageHandling(product, featuredProductsContainer);
                    });
                } else {
                    // Fallback rendering
                    featuredProducts.forEach(product => {
                        const productCard = document.createElement('div');
                        productCard.className = 'product-card';
                        productCard.innerHTML = `
                            <div class="product-img-container">
                                <img src="${product.images[0]}" alt="${product.name}" class="product-img">
                                ${product.isNew ? '<span class="product-badge new">New</span>' : ''}
                                ${product.isSale ? '<span class="product-badge sale">Sale</span>' : ''}
                                <div class="product-actions">
                                    <button class="quick-view-btn" data-id="${product.id}">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="add-to-wishlist" data-id="${product.id}">
                                        <i class="far fa-heart"></i>
                                    </button>
                                    <button class="add-to-cart-btn" data-id="${product.id}">
                                        <i class="fas fa-shopping-cart"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="product-info">
                                <h3 class="product-title">${product.name}</h3>
                                <div class="product-rating">
                                    <div class="stars">
                                        ${generateStars(product.rating)}
                                    </div>
                                    <span class="review-count">(${product.reviewCount || 0})</span>
                                </div>
                                <div class="product-price">
                                    ${product.oldPrice ? `<span class="old-price">₹${product.oldPrice}</span>` : ''}
                                    <span class="current-price">₹${product.price}</span>
                                </div>
                            </div>
                        `;
                        featuredProductsContainer.appendChild(productCard);
                    });
                }
                
                // Add navigation buttons
                const prevButton = document.createElement('button');
                prevButton.className = 'slider-nav prev';
                prevButton.innerHTML = '<i class="fas fa-chevron-left"></i>';
                
                const nextButton = document.createElement('button');
                nextButton.className = 'slider-nav next';
                nextButton.innerHTML = '<i class="fas fa-chevron-right"></i>';
                
                const sliderContainer = featuredProductsContainer.parentElement;
                if (sliderContainer) {
                    sliderContainer.appendChild(prevButton);
                    sliderContainer.appendChild(nextButton);
                    
                    // Add event listeners
                    prevButton.addEventListener('click', () => {
                        featuredProductsContainer.scrollBy({
                            left: -300,
                            behavior: 'smooth'
                        });
                    });
                    
                    nextButton.addEventListener('click', () => {
                        featuredProductsContainer.scrollBy({
                            left: 300,
                            behavior: 'smooth'
                        });
                    });
                }
                
                // Add product event listeners
                initProductEventListeners(featuredProductsContainer);
                
            } catch (error) {
                console.error('Error initializing featured products:', error);
                featuredProductsContainer.innerHTML = '<p class="error">Failed to load featured products.</p>';
            }
        }
        
        // Initialize trending products
        function initTrendingProducts() {
            const trendingProductsContainer = document.querySelector('#trending-products .products-slider');
            if (!trendingProductsContainer) return;
            
            try {
                // Get trending products (max 8)
                let trendingProducts = [];
                if (typeof getTrendingProducts === 'function') {
                    trendingProducts = getTrendingProducts().slice(0, 8);
                } else {
                    // Fallback if function not available
                    console.warn('getTrendingProducts function not found');
                }
                
                // Clear container
                trendingProductsContainer.innerHTML = '';
                
                // Render products
                if (trendingProducts.length === 0) {
                    trendingProductsContainer.innerHTML = '<p class="no-products">No trending products available.</p>';
                    return;
                }
                
                // Use optimized rendering if available
                if (typeof renderProductWithImageHandling === 'function') {
                    trendingProducts.forEach(product => {
                        renderProductWithImageHandling(product, trendingProductsContainer);
                    });
                } else {
                    // Fallback rendering (same as featured products)
                    trendingProducts.forEach(product => {
                        const productCard = document.createElement('div');
                        productCard.className = 'product-card';
                        productCard.innerHTML = `
                            <div class="product-img-container">
                                <img src="${product.images[0]}" alt="${product.name}" class="product-img">
                                ${product.isNew ? '<span class="product-badge new">New</span>' : ''}
                                ${product.isSale ? '<span class="product-badge sale">Sale</span>' : ''}
                                <div class="product-actions">
                                    <button class="quick-view-btn" data-id="${product.id}">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="add-to-wishlist" data-id="${product.id}">
                                        <i class="far fa-heart"></i>
                                    </button>
                                    <button class="add-to-cart-btn" data-id="${product.id}">
                                        <i class="fas fa-shopping-cart"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="product-info">
                                <h3 class="product-title">${product.name}</h3>
                                <div class="product-rating">
                                    <div class="stars">
                                        ${generateStars(product.rating)}
                                    </div>
                                    <span class="review-count">(${product.reviewCount || 0})</span>
                                </div>
                                <div class="product-price">
                                    ${product.oldPrice ? `<span class="old-price">₹${product.oldPrice}</span>` : ''}
                                    <span class="current-price">₹${product.price}</span>
                                </div>
                            </div>
                        `;
                        trendingProductsContainer.appendChild(productCard);
                    });
                }
                
                // Add navigation buttons
                const prevButton = document.createElement('button');
                prevButton.className = 'slider-nav prev';
                prevButton.innerHTML = '<i class="fas fa-chevron-left"></i>';
                
                const nextButton = document.createElement('button');
                nextButton.className = 'slider-nav next';
                nextButton.innerHTML = '<i class="fas fa-chevron-right"></i>';
                
                const sliderContainer = trendingProductsContainer.parentElement;
                if (sliderContainer) {
                    sliderContainer.appendChild(prevButton);
                    sliderContainer.appendChild(nextButton);
                    
                    // Add event listeners
                    prevButton.addEventListener('click', () => {
                        trendingProductsContainer.scrollBy({
                            left: -300,
                            behavior: 'smooth'
                        });
                    });
                    
                    nextButton.addEventListener('click', () => {
                        trendingProductsContainer.scrollBy({
                            left: 300,
                            behavior: 'smooth'
                        });
                    });
                }
                
                // Add product event listeners
                initProductEventListeners(trendingProductsContainer);
                
            } catch (error) {
                console.error('Error initializing trending products:', error);
                trendingProductsContainer.innerHTML = '<p class="error">Failed to load trending products.</p>';
            }
        }
        
        // Helper function to generate star ratings
        function generateStars(rating) {
            if (!rating) return 'Not rated yet';
            
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
            
            let starsHTML = '';
            
            // Full stars
            for (let i = 0; i < fullStars; i++) {
                starsHTML += '<i class="fas fa-star"></i>';
            }
            
            // Half star if needed
            if (halfStar) {
                starsHTML += '<i class="fas fa-star-half-alt"></i>';
            }
            
            // Empty stars
            for (let i = 0; i < emptyStars; i++) {
                starsHTML += '<i class="far fa-star"></i>';
            }
            
            return starsHTML;
        }
        
        // Initialize category filters
        function initCategoryFilters() {
            const categoryButtons = document.querySelectorAll('.category-card');
            if (!categoryButtons.length) return;
            
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    if (category) {
                        window.location.href = `../HTML/products.html?category=${category}`;
                    }
                });
            });
        }
        
        // Initialize newsletter form
        function initNewsletter() {
            const newsletterForm = document.querySelector('.newsletter-form');
            if (!newsletterForm) return;
            
            newsletterForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const emailInput = this.querySelector('input[type="email"]');
                if (!emailInput) return;
                
                const email = emailInput.value.trim();
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                
                if (!email || !emailRegex.test(email)) {
                    if (typeof showNotification === 'function') {
                        showNotification('Please enter a valid email address.', 'error');
                    } else {
                        alert('Please enter a valid email address.');
                    }
                    return;
                }
                
                // Store in localStorage
                const subscribers = JSON.parse(localStorage.getItem('newsletter_subscribers') || '[]');
                if (!subscribers.includes(email)) {
                    subscribers.push(email);
                    localStorage.setItem('newsletter_subscribers', JSON.stringify(subscribers));
                }
                
                // Show success message
                if (typeof showNotification === 'function') {
                    showNotification('You have successfully subscribed to our newsletter!', 'success');
                } else {
                    alert('You have successfully subscribed to our newsletter!');
                }
                
                // Clear input
                emailInput.value = '';
            });
        }
        
        // Initialize mobile navigation
        function initMobileNav() {
            const mobileNav = document.querySelector('.mobile-nav');
            if (!mobileNav) return;
            
            // Add active class to current page link
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const mobileNavLinks = mobileNav.querySelectorAll('a');
            
            mobileNavLinks.forEach(link => {
                const href = link.getAttribute('href');
                if (href && href.includes(currentPage)) {
                    link.classList.add('active');
                }
            });
        }
        
        // Initialize product event listeners
        function initProductEventListeners(container) {
            if (!container) return;
            
            // Add to cart buttons
            const addToCartButtons = container.querySelectorAll('.add-to-cart-btn');
            addToCartButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const productId = parseInt(this.getAttribute('data-id'));
                    if (!productId) return;
                    
                    let product;
                    if (typeof getProductById === 'function') {
                        product = getProductById(productId);
                        
                        if (product) {
                            // If addToCart is defined, use it
                            if (typeof addToCart === 'function') {
                                addToCart(product);
                                
                                // Show notification if function exists
                                if (typeof showNotification === 'function') {
                                    showNotification(`${product.name} added to cart!`, 'success');
                                } else {
                                    alert(`${product.name} added to cart!`);
                                }
                            } else {
                                // Fallback: save in localStorage manually
                                const cart = JSON.parse(localStorage.getItem('cart') || '[]');
                                
                                // Check if product is already in cart
                                const existingProductIndex = cart.findIndex(item => item.id === product.id);
                                
                                if (existingProductIndex !== -1) {
                                    // Increment quantity
                                    cart[existingProductIndex].quantity += 1;
                                } else {
                                    // Handle mobile filter sidebar
                                    const filterToggle = document.querySelector('.filter-toggle');
                                    const filterSidebar = document.querySelector('.filter-sidebar');
                                    const filterBackdrop = document.querySelector('.filter-backdrop');
                                    const filterClose = document.querySelector('.filter-close');
                                    
                                    if (filterToggle && filterSidebar && filterBackdrop && filterClose) {
                                        filterToggle.addEventListener('click', function() {
                                            filterSidebar.classList.add('show');
                                            filterBackdrop.classList.add('show');
                                            document.body.style.overflow = 'hidden';
                                        });
                                        
                                        filterClose.addEventListener('click', function() {
                                            filterSidebar.classList.remove('show');
                                            filterBackdrop.classList.remove('show');
                                            document.body.style.overflow = '';
                                        });
                                        
                                        filterBackdrop.addEventListener('click', function() {
                                            filterSidebar.classList.remove('show');
                                            filterBackdrop.classList.remove('show');
                                            document.body.style.overflow = '';
                                        });
                                    }
                                }
                            }
                        }
                    }
                });
            });
        }
    </script>
</body>
</html> 